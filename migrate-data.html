<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∞–Ω–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button { 
            margin: 5px; 
            padding: 10px 15px; 
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover { background: #0056b3; }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
        pre { 
            background: #f8f9fa; 
            padding: 10px; 
            border-radius: 4px;
            overflow-x: auto;
            max-height: 300px;
        }
        .data-preview {
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h1>
        <p>–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–º–æ–∂–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏/–ø–æ—Ä—Ç–∞–º–∏.</p>
        
        <div class="section">
            <h2>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö</h2>
            <button onclick="checkCurrentData()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
            <div id="current-data"></div>
        </div>
        
        <div class="section">
            <h2>2. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h2>
            <button onclick="exportData()">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
            <div id="export-status"></div>
            <pre id="exported-data"></pre>
        </div>
        
        <div class="section">
            <h2>3. –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h2>
            <textarea id="import-data" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ..." style="width: 100%; height: 100px; margin: 10px 0;"></textarea>
            <button onclick="importData()">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
            <div id="import-status"></div>
        </div>
        
        <div class="section">
            <h2>4. –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h2>
            <button onclick="clearAllData()" style="background: #dc3545;">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
            <div id="clear-status"></div>
        </div>
        
        <div class="section">
            <h2>5. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</h2>
            <ol>
                <li><strong>–°–æ–∑–¥–∞–π—Ç–µ –∞–Ω–∫–µ—Ç—É</strong> –≤ dev —Ä–µ–∂–∏–º–µ (localhost:5173)</li>
                <li><strong>–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ</strong> —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–∫–∏ –≤—ã—à–µ</li>
                <li><strong>–û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–±—Ä–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é</strong> (localhost:8080)</li>
                <li><strong>–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ</strong> –≤ —Å–æ–±—Ä–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é</li>
                <li><strong>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ</strong>, —á—Ç–æ –∞–Ω–∫–µ—Ç–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ –∞–¥–º–∏–Ω–∫–µ</li>
            </ol>
        </div>
    </div>

    <script>
        const SURVEYS_KEY = 'asrr_surveys';
        const RESPONSES_KEY = 'asrr_responses';
        
        function checkCurrentData() {
            const status = document.getElementById('current-data');
            try {
                const surveys = JSON.parse(localStorage.getItem(SURVEYS_KEY) || '[]');
                const responses = JSON.parse(localStorage.getItem(RESPONSES_KEY) || '[]');
                
                let html = `<div class="success">‚úì –î–∞–Ω–Ω—ã–µ –Ω–∞–π–¥–µ–Ω—ã</div>`;
                html += `<p><strong>–ê–Ω–∫–µ—Ç—ã:</strong> ${surveys.length}</p>`;
                html += `<p><strong>–û—Ç–≤–µ—Ç—ã:</strong> ${responses.length}</p>`;
                
                if (surveys.length > 0) {
                    html += '<h4>–°–ø–∏—Å–æ–∫ –∞–Ω–∫–µ—Ç:</h4><ul>';
                    surveys.forEach(survey => {
                        html += `<li>${survey.title} (ID: ${survey.id})</li>`;
                    });
                    html += '</ul>';
                }
                
                status.innerHTML = html;
            } catch (e) {
                status.innerHTML = `<div class="error">‚úó –û—à–∏–±–∫–∞: ${e.message}</div>`;
            }
        }
        
        function exportData() {
            const status = document.getElementById('export-status');
            const dataDiv = document.getElementById('exported-data');
            
            try {
                const surveys = JSON.parse(localStorage.getItem(SURVEYS_KEY) || '[]');
                const responses = JSON.parse(localStorage.getItem(RESPONSES_KEY) || '[]');
                
                const exportData = {
                    surveys: surveys,
                    responses: responses,
                    exportedAt: new Date().toISOString(),
                    version: '1.0'
                };
                
                const jsonString = JSON.stringify(exportData, null, 2);
                dataDiv.textContent = jsonString;
                
                status.innerHTML = `<div class="success">‚úì –î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã (${surveys.length} –∞–Ω–∫–µ—Ç, ${responses.length} –æ—Ç–≤–µ—Ç–æ–≤)</div>`;
                
                // –ö–æ–ø–∏—Ä—É–µ–º –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
                navigator.clipboard.writeText(jsonString).then(() => {
                    status.innerHTML += '<div class="success">‚úì –î–∞–Ω–Ω—ã–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞</div>';
                }).catch(() => {
                    status.innerHTML += '<div class="warning">‚ö† –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞</div>';
                });
                
            } catch (e) {
                status.innerHTML = `<div class="error">‚úó –û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞: ${e.message}</div>`;
            }
        }
        
        function importData() {
            const status = document.getElementById('import-status');
            const importText = document.getElementById('import-data').value;
            
            if (!importText.trim()) {
                status.innerHTML = '<div class="error">‚úó –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞</div>';
                return;
            }
            
            try {
                const importData = JSON.parse(importText);
                
                if (!importData.surveys || !importData.responses) {
                    status.innerHTML = '<div class="error">‚úó –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö</div>';
                    return;
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                localStorage.setItem(SURVEYS_KEY, JSON.stringify(importData.surveys));
                localStorage.setItem(RESPONSES_KEY, JSON.stringify(importData.responses));
                
                status.innerHTML = `<div class="success">‚úì –î–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã (${importData.surveys.length} –∞–Ω–∫–µ—Ç, ${importData.responses.length} –æ—Ç–≤–µ—Ç–æ–≤)</div>`;
                
                // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
                document.getElementById('import-data').value = '';
                
            } catch (e) {
                status.innerHTML = `<div class="error">‚úó –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: ${e.message}</div>`;
            }
        }
        
        function clearAllData() {
            const status = document.getElementById('clear-status');
            
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                try {
                    localStorage.removeItem(SURVEYS_KEY);
                    localStorage.removeItem(RESPONSES_KEY);
                    status.innerHTML = '<div class="success">‚úì –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã</div>';
                } catch (e) {
                    status.innerHTML = `<div class="error">‚úó –û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏: ${e.message}</div>`;
                }
            }
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            checkCurrentData();
        };
    </script>
</body>
</html>


